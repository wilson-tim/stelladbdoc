<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=Cp1252" />
<script src="BSP_AMT/report.js" type="text/javascript"></script>
<link href="BSP_AMT/report.css" type="text/css" rel="stylesheet">
</head>
<body>
<div class="banner">
<table width="98%"><tr>
<td><h2 class="banner">BSP_AMT</h2></td>
</tr></table></div>
<div id="maintabs">
<div class="currentmaintab" onclick="onSelectMainTab(this, 0)">
<div>
<p>Doc</p>
</div>
</div>
<div class="maintab" onclick="onSelectMainTab(this, 1)">
<div>
<p>Details</p>
</div>
</div>
<div class="maintab" onclick="onSelectMainTab(this, 2)">
<div>
<p>Grants</p>
</div>
</div>
<div class="maintab" onclick="onSelectMainTab(this, 3)">
<div>
<p>References</p>
</div>
</div>
<div class="maintab" onclick="onSelectMainTab(this, 4)">
<div>
<p>Dependencies</p>
</div>
</div>
<div class="maintab" onclick="onSelectMainTab(this, 5)">
<div>
<p>Code</p>
</div>
</div>
</div>
<br/>
<div id="masterreports">
<div id="Master.0">
<div class="currentmasterreport">
<TABLE CELLSPACING="0" CELLPADDING="1" WIDTH="100%" BORDER="0">
<TR><TD CLASS="NavBarRow3" VALIGN="top"><FONT SIZE="-2">      SUMMARY:  <A HREF="#field_summary">FIELD</A> | <A HREF="#type_summary">TYPE</A> | <A HREF="#method_summary">METHOD</A></FONT></TD><TD CLASS="NavBarRow3" VALIGN="top"><FONT SIZE="-2"></TR></TABLE><HR><P></P><HR><P></P><A NAME="method_summary"></A><TABLE WIDTH="100%" CELLSPACING="0" CELLPADDING="3" BORDER="1"><TR CLASS="TableHeadingColor"><TD COLSPAN="2"><FONT SIZE="+2"><B>Method Summary</B></FONT></TD><TR CLASS="TableRowColor"><TD WIDTH="1%" VALIGN="top" ALIGN="right"><FONT SIZE="-1"><CODE>&nbsp;</CODE></FONT></TD><TD><CODE><B><A HREF="#BSP_amt">BSP_amt</A></B>( v_string IN VARCHAR2 ) RETURN NUMBER AS v_last_char VARCHAR2 ( 1 ) </CODE><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD></TR>
</TABLE>
<P></P><A NAME="method_detail"></A><TABLE WIDTH="100%" CELLSPACING="0" CELLPADDING="3" BORDER="1"><TR CLASS="TableHeadingColor"><TD COLSPAN="2"><FONT SIZE="+2"><B>Method Detail</B></FONT></TD></TABLE><A NAME="BSP_amt"></A>
<H3>BSP_amt</H3><PRE>          <B>BSP_amt</B>( v_string IN VARCHAR2 ) RETURN NUMBER AS v_last_char VARCHAR2 ( 1 ) </PRE><DL>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<DD><DL></DL></DD></DL><HR><TABLE CELLSPACING="0" CELLPADDING="1" WIDTH="100%" BORDER="0">
<TR><TD CLASS="NavBarRow3" VALIGN="top"><FONT SIZE="-2">      SUMMARY:  <A HREF="#field_summary">FIELD</A> | <A HREF="#type_summary">TYPE</A> | <A HREF="#method_summary">METHOD</A></FONT></TD><TD CLASS="NavBarRow3" VALIGN="top"><FONT SIZE="-2"></TR></TABLE></div>
</div>
<div id="Master.1">
<div class="masterreport">
<table id="Table.0" cellpadding="0" cellspacing="0" summary="">
<th>NAME</th>
<th>VALUE</th>
</tr>
<tr>
<td>OWNER</td>
<td>STELLA</td>
</tr>
<tr>
<td>OBJECT_NAME</td>
<td>BSP_AMT</td>
</tr>
<tr>
<td>SUBOBJECT_NAME</td>
<td>null</td>
</tr>
<tr>
<td>OBJECT_ID</td>
<td>3488896</td>
</tr>
<tr>
<td>DATA_OBJECT_ID</td>
<td>null</td>
</tr>
<tr>
<td>OBJECT_TYPE</td>
<td>FUNCTION</td>
</tr>
<tr>
<td>CREATED</td>
<td>24-OCT-19</td>
</tr>
<tr>
<td>LAST_DDL_TIME</td>
<td>15-JAN-20</td>
</tr>
<tr>
<td>TIMESTAMP</td>
<td>2019-10-24:19:27:37</td>
</tr>
<tr>
<td>STATUS</td>
<td>VALID</td>
</tr>
<tr>
<td>TEMPORARY</td>
<td>N</td>
</tr>
<tr>
<td>GENERATED</td>
<td>N</td>
</tr>
<tr>
<td>SECONDARY</td>
<td>N</td>
</tr>
<tr>
<td>NAMESPACE</td>
<td>1</td>
</tr>
<tr>
<td>EDITION_NAME</td>
<td>null</td>
</tr>
</table>
</div>
</div>
<div id="Master.2">
<div class="masterreport">
<table id="Table.1" cellpadding="0" cellspacing="0" summary="">
<tr>
<th>PRIVILEGE</th>
<th>GRANTEE</th>
<th>GRANTABLE</th>
<th>GRANTOR</th>
<th>OBJECT_NAME</th>
</tr>
<tr onclick="table_onSelectMasterRow(this, 1, 0)" class="currentrow">
<td class="currentcell">EXECUTE</td>
<td class="currentcell">SECTOR_APEX</td>
<td class="currentcell">NO</td>
<td class="currentcell">STELLA</td>
<td class="currentcell">BSP_AMT</td>
</tr>
</table>
</div>
</div>
<div id="Master.3">
<div class="masterreport">
<table id="Table.2" cellpadding="0" cellspacing="0" summary="">
<tr>
<th>NAME</th>
<th>OWNER</th>
<th>TYPE</th>
<th>OBJECT_ID</th>
<th>STATUS</th>
<th>TYPE_LINK</th>
</tr>
</table>
</div>
</div>
<div id="Master.4">
<div class="masterreport">
<table id="Table.3" cellpadding="0" cellspacing="0" summary="">
<tr>
<th>NAME</th>
<th>OWNER</th>
<th>TYPE</th>
<th>OBJECT_ID</th>
<th>STATUS</th>
<th>TYPE_LINK</th>
</tr>
</table>
</div>
</div>
<div id="Master.5">
<div class="masterreport">
<pre>
FUNCTION BSP_amt (v_string IN VARCHAR2) RETURN NUMBER AS
/**
 * ConversionBSPAmt.java
 * 
 * Created on 21 May 2003, 11:59 leigh ashton convert a BSP amt from string to a
 * decimal monetary amount BSP file contains numbers in format where last digit
 * is ascii char, not numeric e.g. 0000001157{ so need to convert to it's true
 * decimal value
 * 
/**
* convert the bsp amt to a normal decimal amt last digit is "overpunched"
* so needs hardcoding of conversion values as supplied by BSP directly
* 
* @return double of the actual amount
* @param inString
*            string representing the bsp amount taken from bsp input file -
*            has overpunched last char which needs to be decifered
* @throws BSPAmtException
*             there is an invalid amount
*
/**
* On the DISH HOT, for all numeric value amounts, the last digit
* contains an 'overpunched' sign, which doubles up as an identifier for
* both the value of the last digit, and also whether the amount is a
* credit or debit (as there are no separate credit/debit identifiers on
* the HOT).
* 
* Credit is defined as monies passed from Agent to Airline (i.e.
* document amount of a Sale, commission on a Refund), Debit is defined
* as monies passed from Airline to Agent (i.e. document amount of a
* Refund, commission on a Sale).
* 
* Overpunch values are as follows
* 
* Credit { = 0 A = 1 B = 2 C = 3 D = 4 E = 5 F = 6 G = 7 H = 8 I = 9
* 
* Debit } = 0 J = 1 K = 2 L = 3 M = 4 N = 5 O = 6 P = 7 Q = 8 R = 9
* 
* examples: 1000{ = 100.00 credit, 1214N = 121.45 debit
*  
*/

v_last_char      VARCHAR2(1):= SUBSTR(v_string,-1);
v_first_section  VARCHAR2(20):=SUBSTR(v_string,1, LENGTH(v_string)-1 );
v_amount         NUMBER:=0;

BEGIN

   IF core_dataw.is_number (v_first_section) = 1 THEN 
      IF   INSTR('{ABCDEFGHI',v_last_char) > 0 THEN 
           v_amount :=  (TO_NUMBER(v_first_section || TRANSLATE(v_last_char,'{ABCDEFGHI','0123456789') ) /100) * 1;
      ELSIF INSTR('}JKLMNOPQR',v_last_char) > 0 THEN 
           v_amount :=  (TO_NUMBER(v_first_section || TRANSLATE(v_last_char,'}JKLMNOPQR','0123456789') ) /100) * -1;  
      END IF;
   END IF;
   
   RETURN(v_amount);

EXCEPTION
WHEN OTHERS THEN 
   RETURN(0);

END BSP_amt;</pre>
</div>
</div>
</div>
</body>
</html>
